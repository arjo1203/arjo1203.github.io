<html>
<head>
    <link href="../bootStrap/bootstrap.min.css" rel="stylesheet" >
    <link href="./carousel.css" rel="stylesheet" >
</head>
<body>
    <div id="mainContianer">
        <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
        <div id="container">
            <div id="player"></div>
        </div>
        <div id="videos" class="form-inline">
            <button class="border" id="button1"><img class="img" src="../SCSU/scsuLogo.png"></button>
            <button id="button2"><img class="img" src="https://i.ytimg.com/vi_webp/scpg3i6fzQo/mqdefault.webp"></button>
            <img id="logo" class="img-circle" src="https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-xfa1/v/t1.0-9/10806324_1801505026741602_3014265343742879711_n.jpg?oh=fd6703f2ab2a0415c34d5bcfe9cb8efa&oe=55B1F0E6&__gda__=1437815661_9f8498548a7309b1ce770dac53c776dc">
            <button id="button3"><img class="img" src="https://pbs.twimg.com/profile_images/473574408758386689/jcE75fVE.png"></button>
            <button id="button4"><img class="img" src="http://www.tk20.com/img/products-graphic1.jpg"></button>
        </div>
    </div>

    <script src="../assets/plugins/jquery-1.11.2.min.js"></script>
    <script src="../bootStrap/bootstrap.js"></script>
    <script>
        var currentVideoIndex = 1, innerHeight = window.innerHeight *.7, innerWidth = window.innerWidth *.7;
        var button1 = $('#button1'), button2 = $('#button2'), button3 = $('#button3'), button4 = $('#button4');

        window.addEventListener('resize', onWindowResize, false);

        // 2. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 3. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: innerHeight,
                width: innerWidth,
                videoId: '6-mH38nPEyg',
                playerVars: {'controls': 0, 'autohide': 1},
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();
            console.log(player);

        }

        // 5. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.
        var done = false;
        function onPlayerStateChange(event) {
            console.log(event);
            if (event.data == 0) {
                switch (currentVideoIndex){
                    case 1:
                        $('#button2').click();
                        currentVideoIndex = 2;
                        break;
                    case 2:
                        $('#button3').click();
                        currentVideoIndex = 3;
                        break;
                    case 3:
                        $('#button4').click();
                        currentVideoIndex = 4;
                        break;
                    case 4:
                        $('#button1').click();
                        currentVideoIndex = 1;
                        break;
                }
            }
        }


        function changeSrc(string){
            var container = document.getElementById("container");
            container.removeChild(container.children[0]);

            var div = document.createElement('div');
            div.id = 'player';
            container.appendChild(div);

            makeNewPlayer(string);
        }



        function makeNewPlayer(src){
                player = new YT.Player('player', {
                    height: innerHeight,
                    width: innerWidth,
                    controls: 0,
                    videoId: src,
                    playerVars: {'controls': 0, 'autohide': 1},
                    events: {
                        'onReady': onPlayerReady,
                        'onStateChange': onPlayerStateChange
                    }
                });

        }




        button1.click(function(){
            currentVideoIndex = 1;

            button2.removeClass('border');
            button3.removeClass('border');
            button4.removeClass('border');

            changeSrc('6-mH38nPEyg');
            button1.addClass('border');
        });




        button2.click(function(){
            currentVideoIndex = 2;

            button1.removeClass('border');
            button3.removeClass('border');
            button4.removeClass('border');

            changeSrc('E_5o7FdxvOs');
            button2.addClass('border');
        });




        button3.click(function(){
            currentVideoIndex = 3;

            button1.removeClass('border');
            button2.removeClass('border');
            button4.removeClass('border');

            changeSrc('nnVlM9XIijI');
            button3.addClass('border');
        });




        button4.click(function(){
            currentVideoIndex = 4;

            button1.removeClass('border');
            button2.removeClass('border');
            button3.removeClass('border');

            changeSrc('E_5o7FdxvOs');
            button4.addClass('border');
        });




        function onWindowResize(){
            var innerHeight = window.innerHeight *.7, innerWidth = window.innerWidth *.7;

            player.c.height = innerHeight;
            player.c.width = innerWidth;
        }
    </script>
</body>
</html>