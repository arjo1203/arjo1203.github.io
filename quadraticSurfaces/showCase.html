<html>
    <head>
        <meta name="viewport" content="minimal-ui">
        <link href="../bootStrap/bootstrap.min.css" rel="stylesheet" >
        <link href="./showCaseSliders.css" rel="stylesheet">
        <title>Jose R. Araujo Meza</title>
        <style>
            body{
                margin: 0;
                padding: 0;
            }
            #sideBar{
                position: absolute;
                width: 350px;
                height: 100%;
                right: 0;
                background-color: #999999;
                overflow-y: auto;
                overflow-x: hidden;
            }
            #sideBarContext{
                position: absolute;
                width: 350px;
                height: 100%;
            }
            #threejs{
                position: absolute;
                height: 100%;
            }
            .params{
                float: left;
                padding: 20px 20px 20px 62px;
                color : #000000;
            }
            #GUI{
                position: relative;
                width: 275px;
                height: 170px;
                left: 37px;
            }
            #GUI_Top{
                position: relative;
                width: 300px;
                height: 170px;
                left: 25px;
            }
            #sliders{
                position: relative;
                height: 616px;
            }
            .inputs{
                width: 100%;
            }
            .theta{
                font-size: 20px;
            }
            .sub{
                font-size: 12px;
            }
            .buttons{
                position: absolute;
                top: 25px;
                left: 5px;
            }
            .abs{
                position: absolute;
            }
            #R12Div{
                top: 0;
            }
            #R13Div{
                top: 80px;
            }
            #R14Div{
                top: 160px;
            }
            #R23Div{
                top: 240px;
            }
            #R24Div{
                top: 320px;
            }
            #R34Div{
                top: 400px;
            }
            #wDiv{
                top: 480px;
            }
        </style>
    </head>
    <body>
        <canvas id="threejs"></canvas>

        <div id="sideBar">
            <div id="sideBarContext">

                <div id="GUI_Top">
                    <h1>Quadric Surface</h1>
                    <div class="inputs">
                        <div class="form-group">
                            <input type="text" class="form-control" id="quadFn" placeholder="Quadric Surface ex. x^2 + y^2 - z^2 + w^2">
                        </div>
                    </div>
                    <button id="graph" class="btn btn-primary btn-block">Graph</button>
                </div>

                <div id="sliders">

                    <div class="abs" id="R12Div">
                        <button id="R12Button" class="btn btn-danger buttons">&#9658;</button>
                        <div>
                            <span class="params">
                                <span class="theta">&theta;</span><span class="sub">12</span> : <span id="R12Val">0</span>&deg;

                                <input id="R12" type="text" data-slider-min="0" data-slider-step="1" data-slider-max="360" data-slider-value="0" data="value: '0'" value="0" style="display: none;">
                            </span>
                        </div>
                    </div>

                    <div class="abs" id="R13Div">
                        <button id="R13Button" class="btn btn-danger buttons">&#9658;</button>
                        <div>
                            <span class="params">
                                <span class="theta">&theta;</span><span class="sub">13</span> : <span id="R13Val">0</span>&deg;

                                <input id="R13" type="text" data-slider-min="0" data-slider-step="1" data-slider-max="360" data-slider-value="0" data="value: '0'" value="0" style="display: none;">
                            </span>
                        </div>
                    </div>

                    <div class="abs" id="R14Div">
                        <button id="R14Button" class="btn btn-danger buttons">&#9658;</button>
                        <div>
                            <span class="params">
                                <span class="theta">&theta;</span><span class="sub">14</span> : <span id="R14Val">0</span>&deg;

                                <input id="R14" type="text" data-slider-min="0" data-slider-step="1" data-slider-max="360" data-slider-value="0" data="value: '0'" value="0" style="display: none;">
                            </span>
                        </div>
                    </div>

                    <div class="abs" id="R23Div">
                        <button id="R23Button" class="btn btn-danger buttons">&#9658;</button>
                        <div>
                            <span class="params">
                                <span class="theta">&theta;</span><span class="sub">23</span> : <span id="R23Val">0</span>&deg;

                                <input id="R23" type="text" data-slider-min="0" data-slider-step="1" data-slider-max="360" data-slider-value="0" data="value: '0'" value="0" style="display: none;">
                            </span>
                        </div>
                    </div>

                    <div class="abs" id="R24Div">
                        <button id="R24Button" class="btn btn-danger buttons">&#9658;</button>
                        <div>
                            <span class="params">
                                <span class="theta">&theta;</span><span class="sub">24</span> : <span id="R24Val">0</span>&deg;

                                <input id="R24" type="text" data-slider-min="0" data-slider-step="1" data-slider-max="360" data-slider-value="0" data="value: '0'" value="0" style="display: none;">
                            </span>
                        </div>
                    </div>

                    <div class="abs" id="R34Div">
                        <button id="R34Button" class="btn btn-danger buttons">&#9658;</button>
                        <div>
                            <span class="params">
                                <span class="theta">&theta;</span><span class="sub">34</span> : <span id="R34Val">0</span>&deg;

                                <input id="R34" type="text" data-slider-min="0" data-slider-step="1" data-slider-max="360" data-slider-value="0" data="value: '0'" value="0" style="display: none;">
                            </span>
                        </div>
                    </div>


                    <div class="abs" id="wDiv">
                        <button id="wButton" class="btn btn-danger buttons">&#9658;</button>
                        <div>
                            <span class="params">
                                w (x4):
                                <span id="wVal">0</span>

                            <input id="w" type="text" data-slider-min="-50" data-slider-step=".1" data-slider-max="50" data-slider-value="0" data="value: '0'" value="0" style="display: none;">
                            </span>
                        </div>
                    </div>
                </div>

                <div id="GUI">
                    <h2>Something Cool?!</h2>
                    <div class="inputs">
                        <div class="form-group">
                            <span>Resolution</span>
                            <input type="text" class="form-control" id="Resolution" placeholder="Enter Resolution between 0 - 100">
                        </div>
                    </div>

                    <button id="regraph" class="btn btn-primary btn-block">Regraph</button>
                </div>
            </div>
        </div>

        <script src="../assets/plugins/jquery-1.11.2.min.js"></script>
        <script src="../bootstrap-slider/bootstrap-slider.js"></script>

        <script src="../Numeric/numeric-1.2.6.js"></script>
        <script src="./personalParser.js"></script>
        <script src="./quadricFns.js"></script>
        <script src="./showCaseSliders.js"></script>

        <script src="../THREE/three.js"></script>
        <script src="../THREE/TrackballControls.js"></script>
        <script src="../THREE/OrbitControls.js"></script>
        <script src="../THREE/MarchingCubesData.js"></script>
        <script src="./showCaseThree.js"></script>
        <script>
            var regraph = $('#regraph'), inputResolution = $('#Resolution'), inputPartition = $('#Partition'), graph = $('#graph'), quadFn = $('#quadFn');

            regraph.click(function(event){
                event.preventDefault();

                var refreshRes = parseInt(inputResolution[0].value);

                if(!isNaN(refreshRes)){
                    if(0 < refreshRes && refreshRes <= 100){
                        makeNewGraph();
                    }
                    else{
                        window.alert('Enter an integer between 0 - 100!');
                    }
                }
                else{
                    window.alert('Enter an integer for the resolution!');
                }
            });




            graph.click(function(){
                var fn = quadFn[0].value, operators = [];

                for(var i = 0; i < fn.length; i++){
                    if(fn[i] == '-' || fn[i] == '+'){
                        operators.push(fn[i]);
                    }
                }

                if(operators.length < 5){
                    var ele11, ele22, ele33, ele44;

                    if(operators.length < 4){
                        ele11 = 1;
                    }
                    else{
                        ele11 = parseInt(operators[0] + '1');
                    }

                    ele22 = parseInt(operators[operators.length - 3] + '1');
                    ele33 = parseInt(operators[operators.length - 2] + '1');
                    ele44 = parseInt(operators[operators.length - 1] + '1');


                    A = [ [ele11, 0, 0, 0], [0, ele22, 0, 0] , [0, 0, ele33, 0] , [0, 0, 0, ele44] ];

                    makeNewGraph();
                }
                else{
                    window.alert('Working on expanding functionality!, ' +
                    'please enter a quadric surface in form of (+ / -) x^2 (+ / -) y^2 (+ / -) z^2 (+ / -) w^2')
                }
            });




            R12Btn.click(function(){
                var currentValue = parseFloat(R12.$element[0].value);
                R12.destroy();
                R12 = new Slider('#R12', {
                    value: currentValue
                });
                if(R12Animation){
                    R12.on('slide', onSlide);
                    R12Btn[0].innerHTML = '&#9658;';
                    clearInterval(R12Interval);
                    R12Animation = false;
                }
                else{
                    R12.on('slide', onAnimate);
                    R12Btn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    R12Interval = setInterval(function(){
                        animateSlider(R12, 1);
                    }, 1);
                    R12Animation = true;
                }
            });




            R13Btn.click(function(){
                var currentValue = parseFloat(R13.$element[0].value);
                R13.destroy();
                R13 = new Slider('#R13', {
                    value: currentValue
                });
                if(R13Animation){
                    R13.on('slide', onSlide);
                    R13Btn[0].innerHTML = '&#9658;';
                    clearInterval(R13Interval);
                    R13Animation = false;
                }
                else{
                    R13.on('slide', onAnimate);
                    R13Btn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    R13Interval = setInterval(function(){
                        animateSlider(R13, 1);
                    }, 1);
                    R13Animation = true;
                }
            });





            R14Btn.click(function(){
                var currentValue = parseFloat(R14.$element[0].value);
                R14.destroy();
                R14 = new Slider('#R14', {
                    value: currentValue
                });
                if(R14Animation){
                    R14.on('slide', onSlide);
                    R14Btn[0].innerHTML = '&#9658;';
                    clearInterval(R14Interval);
                    R14Animation = false;
                }
                else{
                    R14.on('slide', onAnimate);
                    R14Btn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    R14Interval = setInterval(function(){
                        animateSlider(R14, 1);
                    }, 1);
                    R14Animation = true;
                }
            });





            R23Btn.click(function(){
                var currentValue = parseFloat(R23.$element[0].value);
                R23.destroy();
                R23 = new Slider('#R23', {
                    value: currentValue
                });
                if(R23Animation){
                    R23.on('slide', onSlide);
                    R23Btn[0].innerHTML = '&#9658;';
                    clearInterval(R23Interval);
                    R23Animation = false;
                }
                else{
                    R23.on('slide', onAnimate);
                    R23Btn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    R23Interval = setInterval(function(){
                        animateSlider(R23, 1);
                    }, 1);
                    R23Animation = true;
                }
            });




            R24Btn.click(function(){
                var currentValue = parseFloat(R24.$element[0].value);
                R24.destroy();
                R24 = new Slider('#R24', {
                    value: currentValue
                });
                if(R24Animation){
                    R24.on('slide', onSlide);
                    R24Btn[0].innerHTML = '&#9658;';
                    clearInterval(R24Interval);
                    R24Animation = false;
                }
                else{
                    R24.on('slide', onAnimate);
                    R24Btn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    R24Interval = setInterval(function(){
                        animateSlider(R24, 1);
                    }, 1);
                    R24Animation = true;
                }
            });





            R34Btn.click(function(){
                var currentValue = parseFloat(R34.$element[0].value);
                R34.destroy();
                R34 = new Slider('#R34', {
                    value: currentValue
                });
                if(R34Animation){
                    R34.on('slide', onSlide);
                    R34Btn[0].innerHTML = '&#9658;';
                    clearInterval(R34Interval);
                    R34Animation = false;
                }
                else{
                    R34.on('slide', onAnimate);
                    R34Btn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    R34Interval = setInterval(function(){
                        animateSlider(R34, 1);
                    }, 1);
                    R34Animation = true;
                }
            });




            wBtn.click(function(){
                var currentValue = parseFloat(w.$element[0].value);
                w.destroy();
                w = new Slider('#w', {
                    value: currentValue
                });
                if(wAnimation){
                    //Paused
                    w.on('slide', onSlide);
                    wBtn[0].innerHTML = '&#9658;';
                    clearInterval(wInterval);
                    wAnimation = false;
                }
                else{
                    //Playing
                    w.on('slide', onAnimate);
                    wBtn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    wInterval = setInterval(function(){
                        animateSlider(w, .2);
                    }, 10);
                    wAnimation = true;
                }
            });



            function onClick(slider, idString, idBtn, idAnimation, idInterval){
                var currentValue = parseFloat(slider.$element[0].value);
                console.log(currentValue);

                slider.destroy();

                slider = new Slider('#' + idString, {
                    value: currentValue
                });

                if(idAnimation){
                    //Paused
                    slider.on('slide', onSlide);

                    idBtn[0].innerHTML = '&#9658;';
                    clearInterval(idInterval);

                    idAnimation = false;
                }
                else{
                    //Playing
                    slider.on('slide', onAnimate);

                    idBtn[0].innerHTML = '&#9616;&nbsp;&#9612;';
                    idInterval = setInterval(function(){
                        animateSlider(slider, .2);
                    }, 10);

                    idAnimation = true;
                }
            }


            function animateSlider(slider, step){
                var currentValue = parseFloat(slider.$element[0].value),
                        max = parseFloat(slider.$element[0].dataset.sliderMax),
                        min = parseFloat(slider.$element[0].dataset.sliderMin),
                        nextValue;

                if(currentValue >= max){
                    nextValue = min;
                }
                else{
                    nextValue = currentValue + step;
                }

                slider.setValue(nextValue, true);
                slider.$element[0].dataset.sliderValue = nextValue;
            }
        </script>
    </body>
</html>