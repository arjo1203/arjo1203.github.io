//row1
$('#colorDefaultBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('defaultBg');
});

$('#colorSlateBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('slateBlack');
});

$('#colorSlateRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('slateRed');
});

$('#colorNeonGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('neonGreen');
});

$('#colorSlateBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('slateBlue');
});

$('#colorDefaultYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('defaultYellow');
});

//row2
$('#colorNeonBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('neonBlack');
});

$('#colorNightBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('nightBg');
});

$('#colorNightRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('nightRed');
});

$('#colorSlateGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('slateGreen');
});

$('#colorNeonBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('neonBlue');
});

$('#colorNightYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('nightYellow');
});

//row3
$('#colorSlateBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('slateBg');
});

$('#colorNeonBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('neonBg');
});

$('#colorNeonRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('neonRed');
});

$('#colorNightGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('nightGreen');
});

$('#colorNightBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('nightBlue');
});

$('#colorSlateYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('slateYellow');
});

//row4
$('#colorNightBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('nightBlack');
});

$('#colorDefaultBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('defaultBlack');
});

$('#colorDefaultRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('defaultRed');
});

$('#colorDefaultGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('defaultGreen');
});

$('#colorDefaultBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('defaultBlue');
});

$('#colorNeonYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setColor('neonYellow');
});







//row1
$('#themeDefaultBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('defaultBg');
});

$('#themeSlateBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('slateBlack');
});

$('#themeSlateRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('slateRed');
});

$('#themeNeonGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('neonGreen');
});

$('#themeSlateBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('slateBlue');
});

$('#themeDefaultYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('defaultYellow');
});

//row2
$('#themeNeonBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('neonBlack');
});

$('#themeNightBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('nightBg');
});

$('#themeNightRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('nightRed');
});

$('#themeSlateGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('slateGreen');
});

$('#themeNeonBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('neonBlue');
});

$('#themeNightYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('nightYellow');
});

//row3
$('#themeSlateBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('slateBg');
});

$('#themeNeonBg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('neonBg');
});

$('#themeNeonRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('neonRed');
});

$('#themeNightGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('nightGreen');
});

$('#themeNightBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('nightBlue');
});

$('#themeSlateYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('slateYellow');
});

//row4
$('#themeNightBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('nightBlack');
});

$('#themeDefaultBlack').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('defaultBlack');
});

$('#themeDefaultRed').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('defaultRed');
});

$('#themeDefaultGreen').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('defaultGreen');
});

$('#themeDefaultBlue').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('defaultBlue');
});

$('#themeNeonYellow').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setBg('neonYellow');
});




var activeShapeIcon =  $('#activeShapeIcon');

$('#Text').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setShape('Text');
    activeShapeIcon.attr('src', 'icons/text.png');
});

$('#Terminal').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setShape('Terminal');
    activeShapeIcon.attr('src', 'icons/roundedRect.png');
});

$('#Process').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setShape('Process');
    activeShapeIcon.attr('src', 'icons/rect.png');
});

$('#Input').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setShape('Input');
    activeShapeIcon.attr('src', 'icons/slantedRect.png');
});

$('#Decision').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.setShape('Decision');
    activeShapeIcon.attr('src', 'icons/diamond.png');
});




var toolIcon = $('#leftToolsUIBtnIcon');

$('#drawTool').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.activateDrawMode();
    toolIcon.attr('src', 'icons/pencil.png');
});

$('#eraseTool').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.activateEraseMode();
    toolIcon.attr('src', 'icons/eraser.png');
});

$('#moveTool').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.activateMoveMode();
    toolIcon.attr('src', 'icons/move.png');
});

$('#addTool').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.activateShapeMode();
    toolIcon.attr('src', 'icons/add.png');
});





NerdBoard.UIHandler.leftBar.internalUIS.toolsUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    NerdBoard.UIHandler.leftBar.internalUIS.toolsUI.click();
});

NerdBoard.UIHandler.leftBar.internalUIS.drawUI.internalUIS.colorUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.UIHandler.leftBar.internalUIS.drawUI.internalUIS.colorUI.click();
});

NerdBoard.UIHandler.leftBar.internalUIS.drawUI.internalUIS.widthUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.UIHandler.leftBar.internalUIS.drawUI.internalUIS.widthUI.click();
});

NerdBoard.UIHandler.leftBar.internalUIS.addUI.internalUIS.shapeUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.UIHandler.leftBar.internalUIS.addUI.internalUIS.shapeUI.click();
});

NerdBoard.UIHandler.leftBar.internalUIS.addUI.internalUIS.textSizeUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.UIHandler.leftBar.internalUIS.addUI.internalUIS.textSizeUI.click();
});

NerdBoard.UIHandler.leftBar.internalUIS.addUI.internalUIS.textInputUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    NerdBoard.UIHandler.leftBar.internalUIS.addUI.internalUIS.textInputUI.click();
});





NerdBoard.UIHandler.menu.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.UIHandler.menu.click();
});

NerdBoard.UIHandler.menu.internalUIS.saveUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.UIHandler.menu.internalUIS.saveUI.click();
});

NerdBoard.UIHandler.menu.internalUIS.loadUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.UIHandler.menu.internalUIS.loadUI.click();
});

NerdBoard.UIHandler.menu.internalUIS.bgUI.btn.bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.UIHandler.menu.internalUIS.bgUI.click();
});

$('#undo').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.undo();
});

$('#clear').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.clear();
});


$('#saveWorkSpace').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.saveAsWorkSpace();
});

$('#loadWorkSpace').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();
    NerdBoard.loadWorkSpace();
});

$('#saveImg').bind('mousedown touchstart', function() {
    var link = document.createElement("a");
    var name = window.prompt("Please name your Image: ");
    if(name != null){
        link.href = NerdBoard.canvas[0].toDataURL('image/png');
        link.download = name;
        link.click();

        window.alert("Image was saved!");
    }
    else{
        window.alert("Image was NOT saved!!");
    }
});

$('#uploadImg').bind('mousedown touchstart', function(event) {
    event.preventDefault();
    event.stopPropagation();

    var file = document.createElement('input');

    file.type = 'file';
    file.click();

    file.addEventListener('change', function () {
        var reader = new FileReader();

        reader.onload = function (e) {
            //console.log(e.target.result);
            //NerdBoard.clear();
            NerdBoard.Tools.loadRaster(e.target.result);

            paper.project.activeLayer.position = paper.view.center;
            NerdBoard.Tools.resizeBg();
            paper.view.draw();
        };
        reader.readAsDataURL(file.files[0]);
    },
    false);
});






NerdBoard.UIHandler.leftBar.internalUIS.drawUI.internalUIS.widthUI.slider();
NerdBoard.UIHandler.leftBar.internalUIS.addUI.internalUIS.textSizeUI.slider();

NerdBoard.UIHandler.leftBar.styleUI();

centerDiv(NerdBoard.canvas, NerdBoard.UIHandler.leftBar.leftSideBar, 0, .5);

function centerDiv(outerDiv, innerDiv, left, top) {
    var inWidth = innerDiv[0].clientWidth * left, inHeight = innerDiv[0].clientHeight * top;
    var outWidth = outerDiv[0].clientWidth * left, outHeight = outerDiv[0].clientHeight * top;

    innerDiv[0].style.top = Math.round(outHeight - inHeight).toString() + 'px';
    innerDiv[0].style.left = Math.round(outWidth - inWidth).toString() + 'px';
}



NerdBoard.canvas.bind('mousedown touchstart', function(event) {
    event.preventDefault();

    if(NerdBoard.UIHandler.menu.isOut) {
        NerdBoard.UIHandler.menu.click();
    }
    NerdBoard.UIHandler.leftBar.closeUIS();

    //Left Click
    if(event.which == 1) {
    }

    //Right Click
    if(event.which == 3) {

    }

});


/**
 * Prevents default page scrolling action; fixes iOS 8 drawing bug.
 */
document.addEventListener('touchmove', function(event) {
    event.preventDefault();
}, false);